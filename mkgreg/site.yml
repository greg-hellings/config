# ############################################################################
# Preliminary stuff that all the hosts need
# ############################################################################
- name: python2-dnf is needed
  hosts: all:!noadmin
  roles:
    - dnf

- name: most baseline things
  hosts: all:!noadmin:!mingw_sword_package
  roles:
    - role: oasis-roles.system_repositories
      system_repositories_configs: "{{ repositories }}"
      when: repositories is defined
    - common
    - mounts

# ############################################################################
# Personal desktop configuration, for use on systems that I administrate, and
# where GUI programs are needed
# ############################################################################
- name: configure desktop systems
  hosts: cli:desktop:dev:mythtv
  roles:
    - cli

- name: configure desktop systems
  gather_facts: false
  hosts: desktop:dev
  roles:
    - gui

- name: configure development systems
  hosts: dev
  roles:
    - docker
    - packaging
    - java-devel
    - dev
    - sword
    - packaging

- name: configure mariadb/mysql database
  hosts: mariadb
  roles:
    - mariadb

- name: configure webserver
  hosts: webserver
  roles:
    - webserver

- name: configure mythtv
  gather_facts: false
  hosts: mythtv
  roles:
    - role: mythtv
      tags:
        - mythtv
# ############################################################################
# Development machines, designed to be spun up in local VMs
# ############################################################################
- name: configure for cinch development
  hosts: cinch
  gather_facts: false
  roles:
    - docker
    - cinch

- name: configure for Fedora packaging development
  hosts: packaging
  gather_facts: false
  roles:
    - packaging

- name: configure a basic docker system
  hosts: docker
  gather_facts: false
  roles:
    - docker

- name: sword development
  hosts: sword
  gather_facts: false
  roles:
    - docker
    - sword
    - swordweb

- name: xiphos development
  hosts: xiphos
  gather_facts: false
  roles:
    - sword
    - xiphos

- name: mingw sword creation
  hosts: mingw-sword-package
  gather_facts: false
  roles:
    - mingw_sword_package

- name: awx development
  hosts: awx-development
  gather_facts: false
  roles:
    - docker
    - ansible_deps
    - awx
# ############################################################################
# Simple user-land configuration that does not require root access to install
# but makes my life so much easier! Designed to be run on any system that I
# have login-level access to
# ############################################################################
- name: basic user config files
  hosts: all:!mingw-sword-package:!crosswire.org
  roles:
    - vimrc
    - bashrc
    - private_files
    - cleanup
    - gitconfig
  tags:
    - config
