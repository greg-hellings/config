# ############################################################################
# Preliminary stuff that all the hosts need
# ############################################################################
- name: setup the python executable correctly
  hosts: all:!noadmin
  roles:
    - greg_hellings.python_prep

- name: most baseline things
  hosts: all:!noadmin
  roles:
    - role: oasis-roles.system_repositories
      system_repositories_configs: "{{ repositories }}"
      when: repositories is defined
    - common
    - greg_hellings.mounts

# ############################################################################
# Personal desktop configuration, for use on systems that I administrate, and
# where GUI programs are needed
# ############################################################################
- name: configure desktop systems
  hosts: cli:desktop:dev:mythtv
  roles:
    - cli

- name: configure desktop systems
  gather_facts: false
  hosts: desktop:dev
  roles:
    - gui

- name: configure development systems
  hosts: dev
  roles:
    - greg_hellings.ansible
    - greg_hellings.docker
    - packaging
    - java-devel
    - dev
    - greg_hellings.sword
# ############################################################################
# Simple user-land configuration that does not require root access to install
# but makes my life so much easier! Designed to be run on any system that I
# have login-level access to
# ############################################################################
- name: basic user config files
  hosts: all:!crosswire.org
  roles:
    - vimrc
    - bashrc
    - private_files
    - greg_hellings.authorized_key
    - gitconfig
  tags:
    - config

# ############################################################################
# Sets up necessary Certificate Authority chains, if you need any of them.
# ############################################################################
- name: install certificate authorities
  hosts: admin
  roles:
    - oasis-roles.update_ca_trust

- name: configure mariadb/mysql database
  hosts: mariadb
  roles:
    - greg_hellings.mariadb

- name: configure webserver
  hosts: webserver
  roles:
    - webserver

- name: configure mythtv
  gather_facts: false
  hosts: mythtv
  roles:
    - role: mythtv
      tags:
        - mythtv
# ############################################################################
# Development machines, designed to be spun up in local VMs
# ############################################################################
- name: configure for cinch development
  hosts: cinch
  gather_facts: false
  roles:
    - greg_hellings.docker
    - greg_hellings.cinch

- name: configure for Fedora packaging development
  hosts: packaging
  gather_facts: false
  roles:
    - packaging

- name: configure a basic docker system
  hosts: docker
  gather_facts: false
  roles:
    - greg_hellings.docker

- name: sword development
  hosts: sword
  gather_facts: false
  roles:
    - greg_hellings.docker
    - greg_hellings.sword
    - swordweb

- name: xiphos development
  hosts: xiphos
  gather_facts: false
  roles:
    - greg_hellings.sword
    - xiphos
